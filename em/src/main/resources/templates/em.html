<!DOCTYPE html>
<html>
<head>  
  <link rel="stylesheet" href="/css/em.css"/>     
  {{>common_header}}
  <script src="/vue/em.js"></script>  
</head>
<body>
  <div id="main">
    <emmain-view></emmain-view>   
  </div>
</body>
<script>    

new Vue({
     el: '#main', 
     component: 'emmain-view'
  });

  // vue for 문이 안돼서 javascript 함수로 대체함... ㅡㅡ;;;
  const showcontent = function(obj) {
    let no = obj.children[2].firstElementChild.children[0].innerText; 
    
    fetch('http://localhost:5013/list/' + no, {
      method: 'get', 
      headers: {
      'Content-Type': 'application/json'
      } 
      })
      .then(res => res.json())
      .then(function(data) {
        document.getElementsByName("title")[0].value = data.title;
        document.getElementsByName("contents")[0].value = data.contents;
        document.getElementsByClassName('mail-time')[0].children[1].innerText = moment(data.date).format('DD MMM, YYYY');
        
      })
  }

  document.querySelectorAll('.msg-department').forEach((item, i)=> {
    if(item.id.indexOf('deplight') > -1) {
      
      document.getElementById(item.id).addEventListener('click', (obj) => { 
        document.querySelector('.inbox').prepend(event.target); 
        document.getElementById("dep").classList.toggle('none');
        document.getElementById("normal").classList.toggle('none');
        document.getElementById("angry").classList.toggle('none'); 
      })
    
    } else if(item.id.indexOf('dep') > -1) {
      document.getElementById(item.id).addEventListener('click', (obj) => {
        document.querySelector('.inbox').prepend(event.target);        
        document.getElementById("deplight").classList.toggle('none');
        document.getElementById("normal").classList.toggle('none');
        document.getElementById("angry").classList.toggle('none'); 
      })

    } else if(item.id.indexOf('normal') > -1) {
      document.getElementById(item.id).addEventListener('click', (obj) => {
        document.querySelector('.inbox').prepend(event.target); 
        document.getElementById("deplight").classList.toggle('none');
        document.getElementById("dep").classList.toggle('none');
        document.getElementById("angry").classList.toggle('none'); 
      })

    } else {
      document.getElementById(item.id).addEventListener('click', (obj) => {
        document.querySelector('.inbox').prepend(event.target); 
        document.getElementById("deplight").classList.toggle('none');
        document.getElementById("normal").classList.toggle('none');
        document.getElementById("dep").classList.toggle('none'); 
      })
    }
  } 
       
 )
 
    

</script>
<script src="/js/em.js"></script>  
</html>

